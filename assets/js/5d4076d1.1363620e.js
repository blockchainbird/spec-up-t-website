"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[4302],{1019:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"various-roles/developers-guide/intro","title":"Developers Guide","description":"This page is the developer\'s guide for the Spec-Up-T system.","source":"@site/docs/various-roles/developers-guide/intro.md","sourceDirName":"various-roles/developers-guide","slug":"/various-roles/developers-guide/intro","permalink":"/spec-up-t-website/docs/various-roles/developers-guide/intro","draft":false,"unlisted":false,"editUrl":"https://github.com/blockchainbird/spec-up-t-website/tree/main/docs/various-roles/developers-guide/intro.md","tags":[],"version":"current","sidebarPosition":15,"frontMatter":{"sidebar_position":15},"sidebar":"tutorialSidebar","previous":{"title":"Technical skills needed","permalink":"/spec-up-t-website/docs/various-roles/technical-skills-needed"},"next":{"title":"Spec-Up-T demo","permalink":"/spec-up-t-website/docs/spec-up-t-demo-site"}}');var t=n(4848),r=n(8453);const o={sidebar_position:15},l="Developers Guide",d={},a=[{value:"How do you get a new version of Spec-Up-T live?",id:"how-do-you-get-a-new-version-of-spec-up-t-live",level:2},{value:"Adding functionality",id:"adding-functionality",level:2},{value:"Adding client-side functionality",id:"adding-client-side-functionality",level:3},{value:"Testing",id:"testing",level:3},{value:"Handling data",id:"handling-data",level:3},{value:"Gulp",id:"gulp",level:3},{value:"Adding server-side functionality",id:"adding-server-side-functionality",level:3},{value:"Scripts section",id:"scripts-section",level:3},{value:"Directory structure",id:"directory-structure",level:2},{value:"Github API",id:"github-api",level:2},{value:"Example of API response",id:"example-of-api-response",level:3},{value:"Publishing to GitHub and NPM",id:"publishing-to-github-and-npm",level:2}];function c(e){const i={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.header,{children:(0,t.jsx)(i.h1,{id:"developers-guide",children:"Developers Guide"})}),"\n",(0,t.jsx)(i.p,{children:"This page is the developer's guide for the Spec-Up-T system."}),"\n",(0,t.jsx)(i.h2,{id:"how-do-you-get-a-new-version-of-spec-up-t-live",children:"How do you get a new version of Spec-Up-T live?"}),"\n",(0,t.jsx)(i.p,{children:"If you want to add new functionality to Spec-Up-T, you will find below how to proceed."}),"\n",(0,t.jsxs)(i.admonition,{type:"danger",children:[(0,t.jsxs)(i.p,{children:["Be aware that your specification is just one file, an ",(0,t.jsx)(i.code,{children:"index.html"})," file. Keeping this file as small as possible should be a priority when adding functionality. There is no lazy loading or optimization. It is basic HTML plus embedded CSS and JS. (This applies only to client-side functionality and not to server-side things you do from the command line during the \u201cbuild\u201d phase. That's code that doesn't end up in the ",(0,t.jsx)(i.code,{children:"index.html"}),"  after all.)"]}),(0,t.jsx)(i.p,{children:"Also, realize that the GitHub API reaches its limit fairly quickly, especially if there is no authentication. So, in everything, keep in mind that the number of requests should remain minimal."})]}),"\n",(0,t.jsx)(i.p,{children:"Two repos come into play:"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.a,{href:"https://github.com/blockchainbird/spec-up-t",children:"The Spec-Up-T repo"}),", with ",(0,t.jsx)(i.a,{href:"https://www.npmjs.com/package/spec-up-t",children:"associated NPM package"})]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.a,{href:"https://github.com/blockchainbird/spec-up-t-starter-pack",children:"The Spec-Up-T installer repo"}),", with ",(0,t.jsx)(i.a,{href:"https://www.npmjs.com/package/create-spec-up-t",children:"associated NPM package"})]}),"\n"]}),"\n",(0,t.jsxs)(i.p,{children:["The Spec-Up-T installer uses Spec-Up-T as a package in node_modules, which is installed via ",(0,t.jsx)(i.code,{children:"npm install"})," after you install the Spec-Up-T installer itself (see ",(0,t.jsx)(i.a,{href:"/spec-up-t-website/docs/various-roles/admins-guide/introduction",children:"Admins Guide"})," for this)."]}),"\n",(0,t.jsx)(i.p,{children:"The topic of updating Git repositories goes too far here; you can find a lot of information about that online."}),"\n",(0,t.jsx)(i.p,{children:"How to publish an updated package version to NPM:"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:['Update the "version" in ',(0,t.jsx)(i.code,{children:"package.json"})," to a higher number (use ",(0,t.jsx)(i.a,{href:"https://semver.org/",children:"SemVer"}),"); for example, go from\n",(0,t.jsx)(i.code,{children:'"version": "0.11.29"'})," to ",(0,t.jsx)(i.code,{children:'"version": "0.11.30"'})]}),"\n",(0,t.jsxs)(i.li,{children:["Run ",(0,t.jsx)(i.code,{children:"npm publish"})]}),"\n"]}),"\n",(0,t.jsx)(i.p,{children:"Note: The Spec-Up-T installer repo has two package.json files. One is in the root and belongs to the repo itself. The other is inside the directory that contains a full Spec-Up-T installation. This is the package.json that will be used later. The first one is only used for the installation itself. For simplicity, keep both version numbers the same."}),"\n",(0,t.jsx)(i.p,{children:"The new package will be available as soon as it is uploaded."}),"\n",(0,t.jsx)(i.h2,{id:"adding-functionality",children:"Adding functionality"}),"\n",(0,t.jsxs)(i.p,{children:["The ",(0,t.jsx)(i.code,{children:"Spec-Up-T"})," tool is written in ",(0,t.jsx)(i.code,{children:"JavaScript,"})," client-side, and server-side (Node.js)."]}),"\n",(0,t.jsx)(i.h3,{id:"adding-client-side-functionality",children:"Adding client-side functionality"}),"\n",(0,t.jsxs)(i.p,{children:["Client-side JavaScript and CSS can be found in these directories: ",(0,t.jsx)(i.code,{children:"/assets/js"})," and ",(0,t.jsx)(i.code,{children:"/assets/css"}),"."]}),"\n",(0,t.jsxs)(i.p,{children:['This code must first be "compiled" before it enters ',(0,t.jsx)(i.code,{children:"index.html"}),". Compiling, in this case, means that it will end up in the directory ",(0,t.jsx)(i.code,{children:"/assets/compiled"}),". If it is there, it will end up in a newly generated ",(0,t.jsx)(i.code,{children:"index.html"})," via the ",(0,t.jsx)(i.code,{children:"render"})," step. For rendering, see the admin section."]}),"\n",(0,t.jsxs)(i.p,{children:["If you introduce a new CSS or JS file, it should be declared here: ",(0,t.jsx)(i.code,{children:"/src/asset-map.json"}),"."]}),"\n",(0,t.jsx)(i.p,{children:"This is the command to compile:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-bash",children:"gulp compile\n"})}),"\n",(0,t.jsx)(i.h3,{id:"testing",children:"Testing"}),"\n",(0,t.jsx)(i.p,{children:"So, if you have written client-side JavaScript or custom CSS, you need to take the following steps to get this code running:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-bash",children:"gulp compile\n"})}),"\n",(0,t.jsx)(i.p,{children:"Wait for the code to finish. Then:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-bash",children:"npm run render\n"})}),"\n",(0,t.jsxs)(i.p,{children:["Now, your ",(0,t.jsx)(i.code,{children:"index.html"})," file should be created or updated."]}),"\n",(0,t.jsx)(i.h3,{id:"handling-data",children:"Handling data"}),"\n",(0,t.jsx)(i.p,{children:"Since everything is contained in one HTML file, the question arises as to how we store and call data. After all, we can't load external JSON because we want to keep everything within this one HTML file."}),"\n",(0,t.jsx)(i.p,{children:"The solution is to include the data as an embedded JavaScript variable. In the development environment (the installation on your file system from where you invoke commands on the command line), you can choose to store the data as JSON as well. However, in order to get it working in the HTML file, you will also have to include a JS variable. You will have to arrange this through Gulp."}),"\n",(0,t.jsx)(i.h3,{id:"gulp",children:"Gulp"}),"\n",(0,t.jsxs)(i.p,{children:["Of course, you can only use Gulp if you have it ",(0,t.jsx)(i.a,{href:"https://gulpjs.com/docs/en/getting-started/quick-start",children:"installed"}),"."]}),"\n",(0,t.jsx)(i.admonition,{type:"warning",children:(0,t.jsx)(i.p,{children:"If Gulp suddenly stops working even though it worked before, it could be because you are using NVM and have a different Node.js version active."})}),"\n",(0,t.jsx)(i.h3,{id:"adding-server-side-functionality",children:"Adding server-side functionality"}),"\n",(0,t.jsxs)(i.p,{children:["The Node.js scripts that run server-side are in the root of the Spec-Up-T repo and the ",(0,t.jsx)(i.code,{children:"/src/"})," directory."]}),"\n",(0,t.jsxs)(i.p,{children:["If you have a Spec-Up-T installation (via ",(0,t.jsx)(i.code,{children:"npx create-spec-up-t"}),"), how can you run and test server-side Node.js code locally without publishing it on npm first?"]}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Clone the Spec-Up-T repo"}),"\n",(0,t.jsx)(i.li,{children:"Install a Spec-Up-T via the installer"}),"\n"]}),"\n",(0,t.jsxs)(i.p,{children:["Generally, if you now run ",(0,t.jsx)(i.code,{children:"npm run render,"})," it will call the scripts from the Spec-Up-T inside ",(0,t.jsx)(i.code,{children:"node_modules"})," ."]}),"\n",(0,t.jsx)(i.h3,{id:"scripts-section",children:"Scripts section"}),"\n",(0,t.jsxs)(i.p,{children:["In the ",(0,t.jsx)(i.code,{children:"scripts"})," section of the ",(0,t.jsx)(i.code,{children:"package.json"})," file for your Spec-Up-T installation, you will find commands like ",(0,t.jsx)(i.code,{children:"render"})," in the ",(0,t.jsx)(i.code,{children:"scripts"})," section:"]}),"\n",(0,t.jsx)(i.p,{children:"ToDo: add file list"}),"\n",(0,t.jsxs)(i.p,{children:["These are calls to the ",(0,t.jsx)(i.code,{children:"Spec-Up-T"})," library in ",(0,t.jsx)(i.code,{children:"node_modules"}),"."]}),"\n",(0,t.jsx)(i.p,{children:"However, we want to test locally. To do this, we will call the scripts from your local Spec-Up-T clone, where you are developing."}),"\n",(0,t.jsx)(i.p,{children:"Type this into your terminal:"}),"\n",(0,t.jsx)(i.admonition,{type:"warning",children:(0,t.jsx)(i.p,{children:"It is only tested on macOS."})}),"\n",(0,t.jsxs)(i.p,{children:["To ",(0,t.jsx)(i.code,{children:"render"})," the index.html file, run this in your terminal:"]}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-bash",children:"node -e \"require('/Users/***/path/to/your/spec-up-t/index.js')({ nowatch: true })\"\n"})}),"\n",(0,t.jsxs)(i.p,{children:["You will notice that this is the same as the value of the ",(0,t.jsx)(i.code,{children:"render"})," key without the escape characters."]}),"\n",(0,t.jsx)(i.p,{children:"Adjust the other entries if you want to run them."}),"\n",(0,t.jsx)(i.h2,{id:"directory-structure",children:"Directory structure"}),"\n",(0,t.jsx)(i.p,{children:"ToDo: Add file list"}),"\n",(0,t.jsxs)(i.table,{children:[(0,t.jsx)(i.thead,{children:(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.th,{children:"File/Directory"}),(0,t.jsx)(i.th,{children:"Description / remarks"})]})}),(0,t.jsxs)(i.tbody,{children:[(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"assets/"})}),(0,t.jsx)(i.td,{children:"client-side: JS and CSS files"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"gulpfile.js"})}),(0,t.jsx)(i.td,{children:"responsible for the \u201cbuild\u201d of the index.html"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"index.js"})}),(0,t.jsx)(i.td,{children:"main JS file, called via the \u201crender\u201d command"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"package.json"})}),(0,t.jsx)(i.td,{children:"\u201cscript\u201d is needed for testing"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"src/"})}),(0,t.jsxs)(i.td,{children:["JS files (Node.js, for server side stuff) + ",(0,t.jsx)(i.code,{children:"asset-map.json"})]})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"static/"})}),(0,t.jsx)(i.td,{children:"Static files, like logo.svg"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"templates/"})}),(0,t.jsx)(i.td,{children:"Mostly HTML, final step"})]})]})]}),"\n",(0,t.jsx)(i.h2,{id:"github-api",children:"Github API"}),"\n",(0,t.jsx)(i.h3,{id:"example-of-api-response",children:"Example of API response"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-json",children:"[\n  {\n    sha: '117b86fa676c0bd3030c16e8bbb87ebaa61af576',\n    node_id: 'C_kwDOMi-o_toAKDExN2I4NmZhNjc2YzBiZDMwMzBjMTZlOGJiYjg3ZWJhYTYxYWY1NzY',\n    commit: {\n      author: [Object],\n      committer: [Object],\n      message: 'first commit',\n      tree: [Object],\n      url: 'https://api.github.com/repos/****/****/git/commits/117b86fa676c0bd3030c16e8bbb87ebaa61af576',\n      comment_count: 0,\n      verification: [Object]\n    },\n    url: 'https://api.github.com/repos/****/****/commits/117b86fa676c0bd3030c16e8bbb87ebaa61af576',\n    html_url: 'https://github.com/****/****/commit/117b86fa676c0bd3030c16e8bbb87ebaa61af576',\n    comments_url: 'https://api.github.com/repos/****/****/commits/117b86fa676c0bd3030c16e8bbb87ebaa61af576/comments',\n    author: {\n      login: '****',\n      id: 0,\n      node_id: '****',\n      avatar_url: 'https://avatars.githubusercontent.com/u/****?v=4',\n      gravatar_id: '',\n      url: 'https://api.github.com/users/****',\n      html_url: 'https://github.com/****',\n      followers_url: 'https://api.github.com/users/****/followers',\n      following_url: 'https://api.github.com/users/****/following{/other_user}',\n      gists_url: 'https://api.github.com/users/****/gists{/gist_id}',\n      starred_url: 'https://api.github.com/users/****/starred{/owner}{/repo}',\n      subscriptions_url: 'https://api.github.com/users/****/subscriptions',\n      organizations_url: 'https://api.github.com/users/****/orgs',\n      repos_url: 'https://api.github.com/users/****/repos',\n      events_url: 'https://api.github.com/users/****/events{/privacy}',\n      received_events_url: 'https://api.github.com/users/****/received_events',\n      type: 'User',\n      site_admin: false\n    },\n    committer: {\n      login: '****',\n      id: 0,\n      node_id: '****',\n      avatar_url: 'https://avatars.githubusercontent.com/u/****?v=4',\n      gravatar_id: '',\n      url: 'https://api.github.com/users/****',\n      html_url: 'https://github.com/****',\n      followers_url: 'https://api.github.com/users/****/followers',\n      following_url: 'https://api.github.com/users/****/following{/other_user}',\n      gists_url: 'https://api.github.com/users/****/gists{/gist_id}',\n      starred_url: 'https://api.github.com/users/****/starred{/owner}{/repo}',\n      subscriptions_url: 'https://api.github.com/users/****/subscriptions',\n      organizations_url: 'https://api.github.com/users/****/orgs',\n      repos_url: 'https://api.github.com/users/****/repos',\n      events_url: 'https://api.github.com/users/****/events{/privacy}',\n      received_events_url: 'https://api.github.com/users/****/received_events',\n      type: 'User',\n      site_admin: false\n    },\n    parents: []\n  }\n]\n\n"})}),"\n",(0,t.jsx)(i.h2,{id:"publishing-to-github-and-npm",children:"Publishing to GitHub and NPM"}),"\n",(0,t.jsx)(i.p,{children:"The suggested way to publish to GitHub and NPM is as follows:"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Make your changes and commit them:"}),"\n"]}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-bash",children:'git add .\ngit commit -m "Add new feature"\n'})}),"\n",(0,t.jsx)(i.admonition,{type:"info",children:(0,t.jsx)(i.p,{children:"Merging branches is not described here. It's generally best to run npm version after merging your feature branch into the main (or master) branch. This ensures that the version bump and tag are applied to the final state of the code that will be released."})}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Update the version in package.json, commit the change, and create a Git tag:"}),"\n"]}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-bash",children:'npm version <newversion> -m "Bump version to %s"\n'})}),"\n",(0,t.jsxs)(i.admonition,{type:"info",children:[(0,t.jsx)(i.p,{children:"The %s in the npm version command is a placeholder that gets replaced with the new version number. When you run the command, npm automatically substitutes %s with the version number you specified."}),(0,t.jsx)(i.p,{children:"npm automatically creates a new Git tag that matches the new version number you specified."})]}),"\n",(0,t.jsxs)(i.p,{children:["Replace ",(0,t.jsx)(i.code,{children:"<newversion>"})," with the new version number (e.g., 0.11.32)."]}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Push the changes and the tag to the remote repository:"}),"\n"]}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-bash",children:"git push origin main --tags\n"})}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Publish the new version to npm:"}),"\n"]}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-bash",children:"npm publish\n"})})]})}function h(e={}){const{wrapper:i}={...(0,r.R)(),...e.components};return i?(0,t.jsx)(i,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,i,n)=>{n.d(i,{R:()=>o,x:()=>l});var s=n(6540);const t={},r=s.createContext(t);function o(e){const i=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function l(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),s.createElement(r.Provider,{value:i},e.children)}}}]);