"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[6284],{6479:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"developer-documentation/back-end/intro","title":"Intro","description":"Description of repositories related to Spec-Up-T","source":"@site/docs/developer-documentation/back-end/intro.md","sourceDirName":"developer-documentation/back-end","slug":"/developer-documentation/back-end/intro","permalink":"/spec-up-t-website/docs/developer-documentation/back-end/intro","draft":false,"unlisted":false,"editUrl":"https://github.com/blockchainbird/spec-up-t-website/tree/main/docs/developer-documentation/back-end/intro.md","tags":[],"version":"current","sidebarPosition":0,"frontMatter":{"sidebar_position":0},"sidebar":"tutorialSidebar","previous":{"title":"Back-end","permalink":"/spec-up-t-website/docs/category/back-end"},"next":{"title":"GitHub API response","permalink":"/spec-up-t-website/docs/developer-documentation/back-end/github-api-response"}}');var n=t(4848),r=t(8453);const o={sidebar_position:0},c="Intro",l={},d=[{value:"Description of repositories related to Spec-Up-T",id:"description-of-repositories-related-to-spec-up-t",level:2},{value:"The Spec-Up-T installer repository",id:"the-spec-up-t-installer-repository",level:3},{value:"The Spec-Up-T repository",id:"the-spec-up-t-repository",level:3},{value:"Adding server-side functionality",id:"adding-server-side-functionality",level:3},{value:"Scripts section",id:"scripts-section",level:3},{value:"Directory structure",id:"directory-structure",level:2},{value:"Publishing to GitHub and NPM",id:"publishing-to-github-and-npm",level:2},{value:"Add changes to Git",id:"add-changes-to-git",level:3},{value:"Publish to NPM",id:"publish-to-npm",level:3},{value:"Update version numbers",id:"update-version-numbers",level:4},{value:"Push changes",id:"push-changes",level:4},{value:"Publish to NPM",id:"publish-to-npm-1",level:4}];function a(e){const s={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.header,{children:(0,n.jsx)(s.h1,{id:"intro",children:"Intro"})}),"\n",(0,n.jsx)(s.h2,{id:"description-of-repositories-related-to-spec-up-t",children:"Description of repositories related to Spec-Up-T"}),"\n",(0,n.jsx)(s.h3,{id:"the-spec-up-t-installer-repository",children:"The Spec-Up-T installer repository"}),"\n",(0,n.jsx)(s.p,{children:"The Spec-Up-T Installer repository installs a set of files somewhere on a file system."}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"That can be on your local file system, which you later create a GitHub repository from so that others can use your repository as an external source for their glossary. However, you don't have to make a repository of it; without it, you will also get a working glossary."}),"\n",(0,n.jsx)(s.li,{children:"You can also start from GitHub and create a repository through this web interface with the files included in the Starterpack (this option is in development)."}),"\n"]}),"\n",(0,n.jsxs)(s.p,{children:["The Spec-Up-T Installer repository has a subdirectory named ",(0,n.jsx)(s.code,{children:"spec-up-t-boilerplate"}),". This subdirectory is a working Spec-Up-T install. The scripts in the root copy this subdirectory to your chosen location on your file system via an NPX command (or you do this via GitHub's web interface, but this is under development, as mentioned above)."]}),"\n",(0,n.jsxs)(s.p,{children:["Note: You can also copy ",(0,n.jsx)(s.code,{children:"spec-up-t-boilerplate/"})," manually and then call ",(0,n.jsx)(s.code,{children:"npm install"}),". That has the same result."]}),"\n",(0,n.jsxs)(s.p,{children:["When you run this NPX command, this subdirectory is copied to your local file system, and then, when that is done, ",(0,n.jsx)(s.code,{children:"npm install"})," is called. This installs the packages as defined in the co-copied ",(0,n.jsx)(s.code,{children:"package.json"}),", which is also in the mentioned subdirectory. The ",(0,n.jsx)(s.code,{children:"package.json"})," in the root of the repository serves to copy the subdirectory to your local file system, via ",(0,n.jsx)(s.code,{children:"create-spec-up-t-starterpack.js"}),"."]}),"\n",(0,n.jsxs)(s.admonition,{type:"info",children:[(0,n.jsx)(s.p,{children:"The relevant files + a directory in the Spec-Up-T installer repository:"}),(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"spec-up-t-boilerplate/\ncreate-spec-up-t-starterpack.js\nmessages.js\npackage.json\n"})}),(0,n.jsx)(s.p,{children:"This directory contains a working Spec-Up-T:"}),(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"spec-up-t-boilerplate/\n"})}),(0,n.jsx)(s.p,{children:"These files \u2026"}),(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"create-spec-up-t-starterpack.js\nmessages.js\npackage.json\n"})}),(0,n.jsxs)(s.p,{children:["\u2026 copy the ",(0,n.jsx)(s.code,{children:"spec-up-t-boilerplate/"})," directory to your desired location via NPX."]})]}),"\n",(0,n.jsx)(s.h3,{id:"the-spec-up-t-repository",children:"The Spec-Up-T repository"}),"\n",(0,n.jsxs)(s.p,{children:["One of the packages listed in the ",(0,n.jsx)(s.code,{children:"package.json"})," copied to the local file system is ",(0,n.jsx)(s.code,{children:"spec-up-t"}),". This package does all the work from the ",(0,n.jsx)(s.code,{children:"node_modules"})," directory created when you run ",(0,n.jsx)(s.code,{children:"npm install"}),". The copied files in the subdirectory have a helper function."]}),"\n",(0,n.jsxs)(s.p,{children:["In the ",(0,n.jsx)(s.code,{children:"package.json"})," you will find a ",(0,n.jsx)(s.code,{children:"scripts"})," section. These reference the ",(0,n.jsx)(s.code,{children:"spec-up-t"})," package, which can be called via npm commands, such as ",(0,n.jsx)(s.code,{children:"npm run render"}),". Some calls go through a file in the ",(0,n.jsx)(s.code,{children:"/src/server/"})," directory. This workaround is necessary so that you can include a  GitHub token. This token is needed to raise the GitHub API limit."]}),"\n",(0,n.jsx)(s.h3,{id:"adding-server-side-functionality",children:"Adding server-side functionality"}),"\n",(0,n.jsxs)(s.p,{children:["The Node.js scripts that run server-side are in the root of the Spec-Up-T repo and the ",(0,n.jsx)(s.code,{children:"/src/"})," directory."]}),"\n",(0,n.jsxs)(s.p,{children:["If you have a Spec-Up-T installation (via ",(0,n.jsx)(s.code,{children:"npx create-spec-up-t"}),"), how can you run and test server-side Node.js code locally without publishing it on npm first?"]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"Clone the Spec-Up-T repo"}),"\n",(0,n.jsx)(s.li,{children:"Install a Spec-Up-T via the installer"}),"\n"]}),"\n",(0,n.jsxs)(s.p,{children:["Generally, if you now run ",(0,n.jsx)(s.code,{children:"npm run render,"})," it will call the scripts from the Spec-Up-T inside ",(0,n.jsx)(s.code,{children:"node_modules"})," ."]}),"\n",(0,n.jsx)(s.h3,{id:"scripts-section",children:"Scripts section"}),"\n",(0,n.jsxs)(s.p,{children:["In the ",(0,n.jsx)(s.code,{children:"scripts"})," section of the ",(0,n.jsx)(s.code,{children:"package.json"})," file for your Spec-Up-T installation, you will find commands like ",(0,n.jsx)(s.code,{children:"render"})," in the ",(0,n.jsx)(s.code,{children:"scripts"})," section:"]}),"\n",(0,n.jsx)(s.p,{children:"ToDo: add file list"}),"\n",(0,n.jsxs)(s.p,{children:["These are calls to the ",(0,n.jsx)(s.code,{children:"Spec-Up-T"})," library in ",(0,n.jsx)(s.code,{children:"node_modules"}),"."]}),"\n",(0,n.jsx)(s.p,{children:"However, we want to test locally. To do this, we will call the scripts from your local Spec-Up-T clone, where you are developing."}),"\n",(0,n.jsx)(s.p,{children:"Type this into your terminal:"}),"\n",(0,n.jsx)(s.admonition,{type:"warning",children:(0,n.jsx)(s.p,{children:"It is only tested on macOS."})}),"\n",(0,n.jsxs)(s.p,{children:["To ",(0,n.jsx)(s.code,{children:"render"})," the index.html file, run this in your terminal:"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"node -e \"require('/Users/***/path/to/your/spec-up-t/index.js')({ nowatch: true })\"\n"})}),"\n",(0,n.jsxs)(s.p,{children:["You will notice that this is the same as the value of the ",(0,n.jsx)(s.code,{children:"render"})," key without the escape characters."]}),"\n",(0,n.jsx)(s.p,{children:"Adjust the other entries if you want to run them."}),"\n",(0,n.jsx)(s.h2,{id:"directory-structure",children:"Directory structure"}),"\n",(0,n.jsx)(s.p,{children:"ToDo: Add file list"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"File/Directory"}),(0,n.jsx)(s.th,{children:"Description / remarks"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"assets/"})}),(0,n.jsx)(s.td,{children:"client-side: JS and CSS files"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"gulpfile.js"})}),(0,n.jsx)(s.td,{children:"responsible for the \u201cbuild\u201d of the index.html"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"index.js"})}),(0,n.jsx)(s.td,{children:"main JS file, called via the \u201crender\u201d command"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"package.json"})}),(0,n.jsx)(s.td,{children:"\u201cscript\u201d is needed for testing"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"src/"})}),(0,n.jsxs)(s.td,{children:["JS files (Node.js, for server side stuff) + ",(0,n.jsx)(s.code,{children:"asset-map.json"})]})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"static/"})}),(0,n.jsx)(s.td,{children:"Static files, like logo.svg"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"templates/"})}),(0,n.jsx)(s.td,{children:"Mostly HTML, final step"})]})]})]}),"\n",(0,n.jsx)(s.h2,{id:"publishing-to-github-and-npm",children:"Publishing to GitHub and NPM"}),"\n",(0,n.jsx)(s.p,{children:"The suggested way to publish to GitHub and NPM will be described here."}),"\n",(0,n.jsx)(s.h3,{id:"add-changes-to-git",children:"Add changes to Git"}),"\n",(0,n.jsx)(s.p,{children:"Make your changes and commit them:"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:'git add .\ngit commit -m "Add new feature"\n'})}),"\n",(0,n.jsx)(s.admonition,{type:"info",children:(0,n.jsx)(s.p,{children:"Merging branches is not described here. It's generally best to run npm version after merging your feature branch into the main (or master) branch. This ensures that the version bump and tag are applied to the final state of the code that will be released."})}),"\n",(0,n.jsx)(s.h3,{id:"publish-to-npm",children:"Publish to NPM"}),"\n",(0,n.jsx)(s.h4,{id:"update-version-numbers",children:"Update version numbers"}),"\n",(0,n.jsx)(s.admonition,{type:"warning",children:(0,n.jsx)(s.p,{children:"It's easy to forget to update the version nummer in different locations. Please read carefully what is written below."})}),"\n",(0,n.jsxs)(s.p,{children:["Update the version number in four ",(0,n.jsx)(s.code,{children:"package.json"}),"'s. The idea is to keep the version numbers of all repos the same. If you publish an update to NPM you have to raise the version number in four places:"]}),"\n",(0,n.jsxs)(s.ol,{children:["\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.a,{href:"https://github.com/trustoverip/spec-up-t-starter-pack/blob/main/spec-up-t-boilerplate/package.json#L3",children:"https://github.com/trustoverip/spec-up-t-starter-pack/blob/main/spec-up-t-boilerplate/package.json#L3"})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.a,{href:"https://github.com/trustoverip/spec-up-t-starter-pack/blob/main/spec-up-t-boilerplate/package.json#L8",children:"https://github.com/trustoverip/spec-up-t-starter-pack/blob/main/spec-up-t-boilerplate/package.json#L8"})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.a,{href:"https://github.com/trustoverip/spec-up-t-starter-pack/blob/main/package.json#L3",children:"https://github.com/trustoverip/spec-up-t-starter-pack/blob/main/package.json#L3"})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.a,{href:"https://github.com/trustoverip/spec-up-t/blob/master/package.json#L3",children:"https://github.com/trustoverip/spec-up-t/blob/master/package.json#L3"})}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:"add 1: do this manually, if the current version is 1.0.87, make it 1.0.88"}),"\n",(0,n.jsx)(s.p,{children:"add 2: do this manually, if the current version is 1.0.87, make it 1.0.88"}),"\n",(0,n.jsx)(s.p,{children:"Now commit this file with message: \u201cBump version to 1.0.88\u201d"}),"\n",(0,n.jsx)(s.p,{children:"add 3 & 4: Use this command:"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:'npm version <newversion> -m "Bump version to %s"\n'})}),"\n",(0,n.jsx)(s.p,{children:"In this case that would be:"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:'npm version 1.0.88 -m "Bump version to %s"\n'})}),"\n",(0,n.jsx)(s.p,{children:"The %s in the npm version command is a placeholder that gets replaced with the new version number. When you run the command, npm automatically substitutes %s with the version number you specified."}),"\n",(0,n.jsx)(s.p,{children:"npm automatically creates a new Git tag that matches the new version number you specified."}),"\n",(0,n.jsx)(s.h4,{id:"push-changes",children:"Push changes"}),"\n",(0,n.jsx)(s.p,{children:"Push the changes and the tag to the remote repository:"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"git push origin main --tags\n"})}),"\n",(0,n.jsx)(s.h4,{id:"publish-to-npm-1",children:"Publish to NPM"}),"\n",(0,n.jsx)(s.p,{children:"Publish the new version to npm:"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"npm publish\n"})}),"\n",(0,n.jsx)(s.p,{children:"The new package will be available as soon as it is uploaded."})]})}function h(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(a,{...e})}):a(e)}},8453:(e,s,t)=>{t.d(s,{R:()=>o,x:()=>c});var i=t(6540);const n={},r=i.createContext(n);function o(e){const s=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:o(e.components),i.createElement(r.Provider,{value:s},e.children)}}}]);